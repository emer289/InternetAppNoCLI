<!-- development version, includes helpful console warnings -->
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<div id="app">
    <p>
        Input a city:
        <input v-model="question" />
    </p>
    <p>{{ rainString }}</p>
    <p>{{ packCold }}</p>
    <p>{{ packWarm }}</p>
    <p>{{ packHot }}</p>
    <p>{{bringMask}}</p>
    <button v-on:click="getWeather">Get Weather</button>


    <table v-if="weatherForecast != 'which city would you like to know the weather of'">
        <tr v-if="weatherForecast != 'which city would you like to know the weather of'">
            <th>Date</th>
            <th>Temp</th>
            <th>Wind Speed</th>
            <th>Rainfall</th>
        </tr>
        <tr v-for="(weatherIndex, date) in weatherForecast">
            <th>{{ date }}</th>
            <td>{{weatherIndex.temperatureAverage}}</td>
            <td>{{weatherIndex.windSpeedsAverage}}</td>
            <td>{{weatherIndex.rainFallLevelAverage}}</td>
        </tr>

    </table>
</div>

<script>

    var app = new Vue({
        el: '#app',
        data: {
            question: '',
            weatherForecast: 'which city would you like to know the weather of',
            rainString: null,
            packCold: null,
            packWarm: null,
            packHot: null,
            bringMask: null,

        },
        watch: {
            // whenever question changes, this function will run
            question(newQuestion, oldQuestion) {
                console.log("new question is ", newQuestion)
            }
        },
        methods: {
            async getWeather() {
                console.log("city is ", this.question)
                fetch(`http://localhost:3000/weather/${this.question}`)
                    .then(response => {
                        return response.json()
                    }).then(a => {
                    this.weatherForecast = a.weatherForecast
                        console.log(a.weatherForecast)
                    this.rainString = a.rainForecasted
                    this.packCold = a.packCold
                    this.packWarm = a.packWarm
                    this.packHot = a.packHot
                    this.bringMask = a.needMask
                })
            },



        }
    })


</script>